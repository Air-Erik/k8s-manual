# VM Preparation and Template Creation

> **–°—Ç–∞—Ç—É—Å:** üî¥ TODO
> **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
> **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** NSX-T —Å–µ–≥–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (01-nsx-network-setup.md)

## –¶–µ–ª—å
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å VM-—à–∞–±–ª–æ–Ω Ubuntu 24.04 LTS —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è Kubernetes-–Ω–æ–¥.

## –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ –≤—ã—Ö–æ–¥–µ
- VM-—à–∞–±–ª–æ–Ω –≤ vSphere –¥–ª—è Control Plane
- VM-—à–∞–±–ª–æ–Ω –≤ vSphere –¥–ª—è Workers (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ—Ç –∂–µ)
- Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `vm-templates/cloud-init.yaml`
- –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –Ω–æ–¥—ã `scripts/prepare-vm.sh`
- –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ `vm-templates/packages-list.txt`

## –ó–∞–¥–∞—á–∏
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é VM Ubuntu 24.04 LTS
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å containerd, kubeadm, kubelet, kubectl
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å sysctl (ip_forward, bridge-nf-call-iptables)
- [ ] –û—Ç–∫–ª—é—á–∏—Ç—å swap
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cloud-init –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å VM Template –≤ vSphere
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ VM
- Ubuntu 24.04 LTS (minimal install)
- Kubernetes 1.34.x
- containerd (CRI)
- Network: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ NSX-T segment
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ IP –∏–ª–∏ DHCP —Å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

*TODO: –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.*
