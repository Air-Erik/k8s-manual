# VM Template Preparation Research

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ VM Template –¥–ª—è Kubernetes –Ω–æ–¥.

## –°—Ç–∞—Ç—É—Å

**–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø:** üü° –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ AI-–∞–≥–µ–Ω—Ç—É
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ NSX-T –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–≠—Ç–∞–ø 0.1 –∑–∞–≤–µ—Ä—à—ë–Ω)

## –ì–ª–∞–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

**[AI-AGENT-TASK.md](./AI-AGENT-TASK.md)** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞

–°–æ–¥–µ—Ä–∂–∏—Ç:
- 5 —ç—Ç–∞–ø–æ–≤ —Ä–∞–±–æ—Ç—ã (–∞–Ω–∞–ª–∏–∑ ‚Üí –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ‚Üí —Å–∫—Ä–∏–ø—Ç—ã ‚Üí cloud-init ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
- 3+ —Å–∫—Ä–∏–ø—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

## –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é VM Template Ubuntu 24.04 LTS —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏:
- Kubernetes –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (kubeadm, kubelet, kubectl)
- containerd (CRI)
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (sysctl, swap off)
- Cloud-init –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ NSX-T –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

- **Segment:** `k8s-zeon-dev-segment`
- **Subnet:** `10.246.10.0/24`
- **Gateway:** `10.246.10.1`
- **Control Plane IPs:** `10.246.10.10-12`
- **Worker IPs:** `10.246.10.20-30`
- **API VIP:** `10.246.10.100`

## –û–∂–∏–¥–∞–µ–º—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`research/vm-preparation/`)
- `01-version-analysis.md` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π K8s/containerd/Ubuntu
- `02-template-strategy.md` ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Template (–µ–¥–∏–Ω—ã–π vs —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ)
- `03-base-vm-creation.md` ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π VM –≤ vSphere
- `04-k8s-installation.md` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ K8s –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `05-template-finalization.md` ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VM –∫ —Å–æ–∑–¥–∞–Ω–∏—é Template
- `06-validation-checklist.md` ‚Äî –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- `07-first-clone-test.md` ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ Template
- `08-final-documentation.md` ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

### –°–∫—Ä–∏–ø—Ç—ã (`scripts/`)
- `prepare-vm.sh` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ VM
- `validate-vm-template.sh` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Template
- `cleanup-vm-for-template.sh` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º Template

### Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`vm-templates/`)
- `cloud-init-base.yaml` ‚Äî –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `cloud-init-control-plane.yaml` ‚Äî –¥–ª—è Control Plane –Ω–æ–¥
- `cloud-init-worker.yaml` ‚Äî –¥–ª—è Worker –Ω–æ–¥
- `examples/README.md` ‚Äî –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `packages-list.txt` ‚Äî —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

1. **–û–ø–µ—Ä–∞—Ç–æ—Ä** –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–∞–¥–∞—á—É AI-–∞–≥–µ–Ω—Ç—É (—Å–º. –≥–ª–∞–≤–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ –∫–æ—Ä–Ω–µ)
2. **AI-–∞–≥–µ–Ω—Ç** —Å–æ–∑–¥–∞—ë—Ç –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∑–∞–¥–∞–Ω–∏—é
3. **–û–ø–µ—Ä–∞—Ç–æ—Ä** –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π vSphere –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–æ–Ω –∏–∑ Template
5. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É (Cluster Bootstrap)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ VM Template —Å–æ–∑–¥–∞–Ω –≤ vSphere
- ‚úÖ –í—Å–µ K8s –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Cloud-init –≥–æ—Ç–æ–≤ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ kubeadm init/join

## –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏: **–≠—Ç–∞–ø 1.1 ‚Äî Cluster Bootstrap** (kubeadm + kube-vip)

---

**–ù–∞—á–∏–Ω–∞–π —Å AI-AGENT-TASK.md!**
